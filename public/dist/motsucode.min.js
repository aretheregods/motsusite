for(var m="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,t=["Array","prototype","fill"],u=0;u<t.length-1;u++){var v=t[u];v in n||(n[v]={}),n=n[v]}var w=t[t.length-1],y=n[w],A=y||function(t,e,n){var a=this.length||0;for(0>e&&(e=Math.max(0,a+e)),(null==n||n>a)&&(n=a),n=Number(n),0>n&&(n=Math.max(0,a+n)),e=Number(e||0);e<n;e++)this[e]=t;return this};A!=y&&null!=A&&m(n,w,{configurable:!0,writable:!0,value:A}),function(t){function e(a){if(n[a])return n[a].a;var r=n[a]={f:a,g:!1,a:{}};return t[a].call(r.a,r,r.a,e),r.g=!0,r.a}var n={};e.m=t,e.i=n,e.f=function(t){return t},e.b=function(t,n){e.c(t)||Object.defineProperty(t,"a",{configurable:!1,enumerable:!0,get:n})},e.j=function(t){var n=t&&t.h?function(){return t.default}:function(){return t};return e.b(n,n),n},e.c=function(t){return Object.prototype.hasOwnProperty.call(t,"a")},e.l="",e(e.o=1)}([function(){function t(e,n,o,l,i,u){for(var d=u.length-1,g=n;g<o;g++)if(u[l]=g,l+1>=d){for(var h=0,c=0;c<d;c++)n=u[c],h+=e[u[c+1]+n*i];a<h&&(r=u.slice(1,u.length-1),a=h)}else t(e,g+1,o+1,l+1,i,u)}function e(){var e=document.getElementById("motsu-in"),n=document.createElement("canvas");n.width=e.width,n.height=e.height;var o=n.getContext("2d");for(o.drawImage(e,0,0,n.width,n.height),e=o.getImageData(0,0,n.width,n.height).data,n=Array(256),n.fill(0),o=0;o<e.length;o+=4)n[11*e[o]+16*e[o+1]+5*e[o+2]>>5]++;for(o=0;o<n.length;o++)n[o]++;e=parseInt(document.getElementById("n-classes").value),a=0,r=Array(e-1),r.fill(0);var o=Array(n.length+1),l=Array(n.length+1);o[0]=0;for(var i=l[0]=0,u=0,d=0;d<n.length;d++)i+=n[d],u+=d*n[d],o[d+1]=i,l[d+1]=u;for(i=Array(n.length*n.length),i.fill(0),u=0;u<n.length;u++)for(d=u+1;d<n.length;d++)i[d+u*n.length]=Math.pow(l[d]-l[u],2)/(o[d]-o[u]);for(o=Array(e+1),o[0]=0,o[o.length-1]=n.length-1,t(i,1,n.length-e+1,1,n.length,o),o=r,document.getElementById("thresholds-results").value=o.toString(),l=document.getElementById("motsu-in"),i=document.getElementById("motsu-out"),i.width=l.width,i.height=l.height,n=i.getContext("2d"),n.drawImage(l,0,0,i.width,i.height),l=n.getImageData(0,0,i.width,i.height),i=l.data,d=Array(e),u=0;u<e;u++)d[u]=Math.round(255*u/(e-1));for(var e=Array(256),g=0,u=0;u<e.length;u++)g<o.length&&u>=o[g]&&g++,e[u]=d[g];for(u=0;u<i.length;u+=4)o=11*i[u]+16*i[u+1]+5*i[u+2]>>5,o=e[o],i[u]=o,i[u+1]=o,i[u+2]=o,i[u+3]=255;n.putImageData(l,0,0)}function n(t){var e=new FileReader;e.onload=function(t){document.getElementById("motsu-in").src=t.target.result},document.getElementById("image-upload").value=t.files[0].name,e.readAsDataURL(t.files[0])}var a=0,r=[];document.getElementById("motsu-in").addEventListener("load",function(){e()}),document.getElementById("image-load").addEventListener("change",function(){n(this)}),document.getElementById("n-classes").addEventListener("change",function(){e()}),document.getElementById("download-button").addEventListener("click",function(){this.href=document.getElementById("motsu-out").toDataURL(),this.download="my-motsu-image.png"},!1)},function(t,e,n){t.a=n(0)}]);